mongo sebastian clase 05/11/2025
//reto 2//
db.bands.insertMany([
  {
    name: "Fuerza Regida",
    country: "México",
    members: ["Jesús Ortiz Paz", "Samuel Jaimez", "Kris Nava"],
    albums: [
      { title: "Del Barrio Hasta Aquí", year: 2022, rating: 5, sales: 18000 },
      { title: "Pa Las Baby's y Belikeada", year: 2023, rating: 4, sales: 25000 }
    ]
  },
  {
    name: "Grupo Frontera",
    country: "México",
    members: ["Adelaido Solís", "Juan Javier Cantú", "Carlos Zamora"],
    albums: [
      { title: "El Comienzo", year: 2023, rating: 5, sales: 22000 },
      { title: "Jugando A Que No Pasa Nada", year: 2024, rating: 4, sales: 27000 }
    ]
  },
  {
    name: "Calibre 50",
    country: "México",
    members: ["Edén Muñoz", "Armando Ramos", "Erick García", "Alejandro Gaxiola"],
    albums: [
      { title: "Desde el Rancho", year: 2020, rating: 5, sales: 30000 },
      { title: "Corridos de Alto Calibre", year: 2021, rating: 4, sales: 24000 }
    ]
  }
]);


-------------------------------------------------------------------------------------------------
//reto 2//
db.bands.aggregate([
  { $unwind: "$albums" },
  {
    $group: {
      _id: "$name",
      albumCount: { $sum: 1 },
      totalSales: { $sum: "$albums.sales" }
    }
  },
  { $sort: { albumCount: -1,}}
  ]);

-------------------------------------------------------------------------------------------------
//reto 3//

db.bands.aggregate([
  { $unwind: "$albums" },
  {$project: {
      _id: 0,
      band: "$name",
      title: "$albums.title",
      sales: "$albums.sales",}
  },
  { $sort: { sales: -1 } },
  { $limit: 2 }
]);

-----------------------------------------------------------------------------------------------
//reto 4//
db.bands.aggregate([
  {$unwind:"$albums"},
  {$group:{
      _id:"$country",
      rating:{$avg:"$albums.rating"} }
  },
  {$sort:{rating:-1}}
]);
